import React from 'react'
import imgplace from "./300.png"
import {useState, useEffect, useContext, useRef} from "react"
import axios from 'axios'
import AppContext from"../context/app-context"
import "./ProfileCard.css"

export default function ProfileCard() {

    const [state, setState] = useContext(AppContext)

    const [imgeUrl, setImageUrl] = useState(imgplace)

    const [imgfile, setImgFile] = useState(null)

    const uploadref = useRef(null)

    const handleClick = () => {
        console.log(imgfile)
        uploadref.current.click()
        
    }

    useEffect(() => {
        if(state.user.avatarUrl){
            setImageUrl(state.user.avatarUrl)
        }
    }, [state.user.avatarUrl])

    useEffect(() => {
        if(imgfile){
            const formdata = new FormData();
            formdata.append("image", imgfile, imgfile.name)
            axios.post(`user/avatar/${state.user.userId}`, formdata)
            .then((res) => {
                return setImageUrl(res.data.image)
            })
            .catch(error => {
                return console.log(error)
            })
        }
    }, [imgfile])

  return (
  <div id="profileCard" style={{width: 584, height: 822, boxShadow: "-1px 1px 10px 10px rgba(0,0,0,0.25)", borderRadius: 44, position:"relative" }}>
    
  <div id="avatar" style={{ marginRight: 20, display: "flex", position:"absolute", top:145, bottom:350, right:130, left:130 }}>
    <img onClick={handleClick} style={{borderRadius: 162, width:324, height:324}} src={imgeUrl}/>
    <input ref={uploadref}class="custom-file-input" style={{ display:"none"}}onChange={(e) => {setImgFile(e.target.files[0])}} type="file"/>
  </div>


    <div style={{position:"absolute", width: 99, height: 99, top: 32, bottom: 693, right: 243, left: 243}}><svg width="97" height="97" viewBox="0 0 97 97" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_3_12)"><path d="M48.2728 0C74.9348 0 96.546 21.6142 96.546 48.2732C96.546 74.9351 74.9348 96.546 48.2728 96.546C21.6109 96.546 0 74.9348 0 48.2732C0 21.6142 21.6112 0 48.2728 0Z" fill="#3B5998"/><path d="M54.1504 33.2328H60.3716V24.0428H53.0584V24.0759C44.1972 24.3898 42.381 29.3709 42.221 34.6025H42.2027V39.1915H36.1688V48.1913H42.2027V72.3156H51.2963V48.1913H58.7454L60.1844 39.1915H51.2993V36.419C51.2993 34.6509 52.4758 33.2328 54.1504 33.2328Z" fill="white"/></g><defs><clipPath id="clip0_3_12"><rect width="96.546" height="96.546" fill="white"/></clipPath></defs></svg></div>
    <div style={{position:"absolute", width: 99, height: 99, top: 257, bottom: 466, right: 467, left: 18}}><svg width="101" height="101" viewBox="0 0 101 101" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_8_24)"><path d="M50.3714 100.743C78.1907 100.743 100.743 78.1907 100.743 50.3714C100.743 22.552 78.1907 0 50.3714 0C22.552 0 0 22.552 0 50.3714C0 78.1907 22.552 100.743 50.3714 100.743Z" fill="#55ACEE"/><path d="M81.2255 36.2004C79.0669 37.1576 76.7449 37.805 74.3098 38.0941C76.7961 36.6045 78.7042 34.2475 79.6048 31.4343C77.2783 32.8144 74.7004 33.8156 71.959 34.3552C69.7627 32.0161 66.6335 30.5543 63.1684 30.5543C56.5202 30.5543 51.1282 35.9463 51.1282 42.5945C51.1282 43.5382 51.2351 44.4568 51.4416 45.3385C41.4352 44.8366 32.5629 40.0435 26.6241 32.7569C25.5879 34.5348 24.9934 36.6045 24.9934 38.8107C24.9934 42.9869 27.1206 46.6737 30.3495 48.8323C28.3768 48.7704 26.519 48.2289 24.8965 47.3247C24.8956 47.3759 24.8956 47.4271 24.8956 47.4774C24.8956 53.3112 29.0475 58.177 34.5545 59.2823C33.5452 59.5589 32.4794 59.7052 31.383 59.7052C30.6054 59.7052 29.8521 59.6307 29.1176 59.4906C30.6494 64.2729 35.095 67.7542 40.3649 67.852C36.2434 71.0818 31.0526 73.0061 25.4101 73.0061C24.4403 73.0061 23.4795 72.9495 22.5394 72.8373C27.865 76.2547 34.1953 78.2472 40.9943 78.2472C63.1406 78.2472 75.2517 59.901 75.2517 43.989C75.2517 43.4673 75.24 42.9474 75.2167 42.432C77.571 40.7349 79.612 38.6149 81.2255 36.2004Z" fill="#F1F2F2"/></g><defs><clipPath id="clip0_8_24"><rect width="100.744" height="100.744" fill="white"/></clipPath></defs></svg></div>
    <div style={{position:"absolute", width: 99, height: 99, top: 484, bottom: 240, right: 243, left: 243}}><svg width="98" height="98" viewBox="0 0 98 98" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M48.6928 7.62939e-06C75.585 7.62939e-06 97.3855 21.8005 97.3855 48.6928C97.3855 75.585 75.585 97.3855 48.6928 97.3855C21.8005 97.3855 0 75.585 0 48.6928C0 21.8005 21.8005 7.62939e-06 48.6928 7.62939e-06Z" fill="#6C27B3"/><path d="M71.2721 72.103C65.4543 71.3665 59.3882 71.3922 53.2834 71.9734C44.7579 72.6293 32.2979 76.5641 27.7073 68.6945C20.3326 56.096 23.9699 39.9667 25.6884 25.6931L51.3162 0.0707779C76.1168 1.38757 95.993 21.2611 97.314 46.0607L71.2721 72.103Z" fill="#501A96"/><path d="M59.9581 76.5641H37.4272C28.2707 76.5641 20.8215 69.1148 20.8215 59.9583V37.4274C20.8215 28.2713 28.2707 20.8215 37.4274 20.8215H59.9583C69.1144 20.8215 76.5642 28.2709 76.5642 37.4274V59.9583C76.564 69.1148 69.1146 76.5641 59.9581 76.5641ZM70.9564 37.4273C70.9564 31.3532 66.0323 26.4292 59.9583 26.4292H37.4274C31.3534 26.4292 26.4293 31.3532 26.4293 37.4273V59.9581C26.4293 66.0322 31.3534 70.9564 37.4274 70.9564H59.9583C66.0323 70.9564 70.9564 66.032 70.9564 59.9581V37.4273Z" fill="white"/><path d="M48.6928 63.11C40.7433 63.11 34.2755 56.6423 34.2755 48.6928C34.2755 40.7439 40.7433 34.2761 48.6928 34.2761C56.6422 34.2761 63.1094 40.7433 63.1094 48.6928C63.1094 56.6423 56.6422 63.11 48.6928 63.11ZM48.6928 39.8838C43.8275 39.8838 39.8832 43.8273 39.8832 48.6928C39.8832 53.5583 43.8275 57.5024 48.6928 57.5024C53.558 57.5024 57.5018 53.5585 57.5018 48.6928C57.5018 43.8275 53.558 39.8838 48.6928 39.8838Z" fill="white"/><path d="M66.5917 63.0012C66.5917 61.0935 65.045 59.5465 63.137 59.5465C61.2292 59.5465 59.6823 61.0935 59.6823 63.0012C59.6823 64.9092 61.2292 66.4559 63.137 66.4559C65.0453 66.4559 66.5917 64.9096 66.5917 63.0012Z" fill="#D1D1D1"/><path d="M59.9583 76.5641H48.5836V70.9564H59.9583C66.0323 70.9564 70.9564 66.032 70.9564 59.9581V37.4273C70.9564 31.3532 66.0323 26.4292 59.9583 26.4292H48.5836V20.8215H59.9583C69.1144 20.8215 76.564 28.2709 76.564 37.4274V59.9583C76.564 69.1148 69.1146 76.5641 59.9583 76.5641Z" fill="#D1D1D1"/><path d="M48.6927 63.11C48.656 63.11 48.6203 63.1074 48.5836 63.1074V57.4997C48.6199 57.5001 48.656 57.5024 48.6927 57.5024C53.558 57.5024 57.5018 53.5585 57.5018 48.6928C57.5018 43.8275 53.5582 39.8838 48.6927 39.8838C48.656 39.8838 48.6199 39.8861 48.5836 39.8864V34.2788C48.6203 34.2784 48.656 34.2761 48.6927 34.2761C56.6422 34.2761 63.1094 40.7435 63.1094 48.6928C63.1094 56.6423 56.6422 63.11 48.6927 63.11Z" fill="#D1D1D1"/></svg></div>

    <div style={{position:"absolute", width: 99, height: 99, top: 257, bottom: 466, right: 18, left: 467}}><svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_8_23)"><path d="M49.5323 99.0635C76.8882 99.0635 99.0646 76.8872 99.0646 49.5312C99.0646 22.1753 76.8882 -0.00106812 49.5323 -0.00106812C22.1764 -0.00106812 0 22.1753 0 49.5312C0 76.8872 22.1764 99.0635 49.5323 99.0635Z" fill="#007AB9"/><path d="M79.1273 53.5171V73.9382H67.2877V54.8857C67.2877 50.1018 65.5783 46.8348 61.2916 46.8348C58.0202 46.8348 56.0768 49.0343 55.2186 51.164C54.9069 51.9251 54.8265 52.982 54.8265 54.0495V73.9373H42.986C42.986 73.9373 43.145 41.6686 42.986 38.3284H54.8274V43.3745C54.8036 43.4143 54.77 43.4531 54.7488 43.4911H54.8274V43.3745C56.4008 40.9534 59.2069 37.4922 65.498 37.4922C73.2874 37.4922 79.1273 42.5816 79.1273 53.5171ZM30.5999 21.1637C26.5497 21.1637 23.9 23.8223 23.9 27.3152C23.9 30.7341 26.4729 33.4695 30.4445 33.4695H30.5213C34.6509 33.4695 37.2185 30.7341 37.2185 27.3152C37.1399 23.8223 34.6509 21.1637 30.5999 21.1637ZM24.6037 73.9382H36.4398V38.3284H24.6037V73.9382Z" fill="#F1F2F2"/></g><defs><clipPath id="clip0_8_23"><rect width="99.0646" height="99.0646" fill="white"/></clipPath></defs></svg>
    </div>


    <h1 style={{position:"absolute", top: 640, bottom: 156, right: 0, left: 0}}>Ashu del Monacco</h1>
  </div>
  )
}
